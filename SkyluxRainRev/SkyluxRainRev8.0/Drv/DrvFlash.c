/*
 * DrvFlash.c
 *
 * Created: 16/07/2019 09:54:22
 *  Author: Vermeersch Stijn
 */ 
/**********************************************************************************************************************/

/**********************************************************************************************************************/



/***********************************************************************************************************************
; V E R I F Y    C O N F I G U R A T I O N
;---------------------------------------------------------------------------------------------------------------------*/
/**********************************************************************************************************************/



/***********************************************************************************************************************
; I N C L U D E S
;---------------------------------------------------------------------------------------------------------------------*/
#include <hal_atomic.h>
#include <peripheral_clk_config.h>
#include <utils.h>
#include <hal_init.h>
#include <hpl_gclk_base.h>
#include <hpl_pm_base.h>

#include <hal_flash.h>
#include "..\..\hal\include\hal_i2c_s_async.h"
#include "utils.h"

#include "atmel_start_pins.h"
#include "DrvFlash.h"
/**********************************************************************************************************************/



/***********************************************************************************************************************
; L O C A L   D E F I N I T I O N S   A N D   M A C R O S
;---------------------------------------------------------------------------------------------------------------------*/

/**********************************************************************************************************************/



/***********************************************************************************************************************
; L O C A L   T Y P E D E F S
;---------------------------------------------------------------------------------------------------------------------*/

/**********************************************************************************************************************/



/***********************************************************************************************************************
; L O C A L   F U N C T I O N   P R O T O T Y P E S
;---------------------------------------------------------------------------------------------------------------------*/

void FLASH_0_CLOCK_init(void);

/**********************************************************************************************************************/



/***********************************************************************************************************************
; L O C A L   V A R I A B L E S
;---------------------------------------------------------------------------------------------------------------------*/
struct flash_descriptor FLASH_0;

/**********************************************************************************************************************/

/***********************************************************************************************************************
; E X P O R T E D   V A R I A B L E S
;---------------------------------------------------------------------------------------------------------------------*/
/**********************************************************************************************************************/

/***********************************************************************************************************************
; L O C A L   F U N C T I O N S
;---------------------------------------------------------------------------------------------------------------------*/
void FLASH_0_CLOCK_init(void)
{
	_pm_enable_bus_clock(PM_BUS_APBB, NVMCTRL);
}
/*--------------------------------------------------------------------------------------------------------------------*/

/*--------------------------------------------------------------------------------------------------------------------*/

/*--------------------------------------------------------------------------------------------------------------------*/

/**********************************************************************************************************************/

/***********************************************************************************************************************
; E X P O R T E D   F U N C T I O N S
;---------------------------------------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------------------------------------*/
void DrvFlashInit(void)
{
	FLASH_0_CLOCK_init();
	flash_init(&FLASH_0, NVMCTRL);
}
/*--------------------------------------------------------------------------------------------------------------------*/
void DrvFlashWrite(uint32_t startaddress, uint8_t* buffer, uint32_t length)
{
	//flash_write(&FLASH_0, startaddress, buffer, length);
}
/*--------------------------------------------------------------------------------------------------------------------*/
void DrvFlashAppend(uint32_t startaddress, uint8_t* buffer, uint32_t length)
{
	//flash_append(&FLASH_0, startaddress, buffer, length);
}
/*--------------------------------------------------------------------------------------------------------------------*/
void DrvFlashRead(uint32_t startaddress, uint8_t* buffer, uint32_t length)
{
	flash_read(&FLASH_0, startaddress, buffer, length);
}
/*--------------------------------------------------------------------------------------------------------------------*/
/**********************************************************************************************************************/